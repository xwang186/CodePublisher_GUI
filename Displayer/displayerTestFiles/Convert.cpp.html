<!Doctype html>
<html>
  <head>
    <style>
      body {
        padding:15px 40px;
        font-family: Consolas;
        font-size: 1.25em;
        font-weight: normal;
      }
    </style>
  </head>
  <body><h3>Convert.cpp</h3><pre>/////////////////////////////////////////////////////////////////////<br>// Convert.cpp                                                     //<br>//                                                                 //<br>// Xiaohan Wang, Jim Fawcett, Spring 2019                          //<br>/////////////////////////////////////////////////////////////////////<br><br>#include &ltregex&gt<br>#include "Convert.h"<br><br><br>#include &ltfstream&gt<br>#include &ltiostream&gt<br><br>#include &ltsstream&gt<br>using namespace std;<br>// -----&lt function replacement to replace one elmenet in a string with anthor element &gt---------------<br>string& replacement(string& str, const string& old_value, const  string& new_value)<br>{<br>	for (string::size_type pos(0); pos != string::npos; pos += new_value.length())<br>	{<br>		if ((pos = str.find(old_value, pos)) != string::npos)<br>		{<br>			str.replace(pos, old_value.length(), new_value);<br>		}<br>		else { break; }<br>	}<br>	return   str;<br>}<br>// -----&lt function WriteTemplete write html headers and ends to a content, and highlight the file name &gt---------------<br>string writeTemplate(string content,string filename) {<br>	ifstream head("templateHead.txt");<br>	ifstream end("templateEnd.txt");<br>	if (!head.is_open()|| !end.is_open())<br>	{<br>		cout &lt&lt "Error opening head or end file!"; exit(1);<br>	}<br>	stringstream bufferH;<br>	bufferH &lt&lt head.rdbuf();<br>	stringstream bufferE;<br>	bufferE &lt&lt end.rdbuf();<br>	string result = bufferH.str()+"&lth3&gt" + filename +"&lt/h3&gt"+content+bufferE.str();<br>	return result;<br>}<br><br>Convert::Convert()<br>{<br>}<br><br>#include&ltdirect.h&gt<br>#include&ltconio.h&gt<br>// -----&lt function ConvertIt to do all the jobs of translating one file into html format &gt---------------<br>void Convert::ConvertIt(const std::string& filename,std::string filepath)<br>{<br>	std::cout &lt&lt "Converting " &lt&lt filename &lt&lt "...\n";<br>	stringstream buffer;<br>	ifstream in(filepath+"\\"+filename);<br>	string foldername = "convertedPages";<br>	int t=_mkdir(foldername.c_str());<br>	char* path = _getcwd(NULL, 0);<br>	string currentPath;<br>	if (path==NULL)<br>	{<br>		std::cout &lt&lt "\nError getting path using windows system call!\n";<br>		exit(0);<br>	}<br>	currentPath = path;<br><br>	ofstream out(currentPath+"\\convertedPages\\"+filename+".html");<br>	if (!in.is_open())<br>	{<br>		cout &lt&lt "Error opening file"&lt&ltfilename; <br>	}<br>	<br>	if (!out.is_open())<br>	{<br>		cout &lt&lt "Error Creating file"&lt&ltfilename; <br>	}<br>	buffer &lt&lt in.rdbuf();<br>	in.close();<br>	string contents = buffer.str();<br>	std::cout &lt&lt "Initializing content..";<br>	contents = replacement(contents, "&lt", "&lt");<br>	contents = replacement(contents, "&gt", "&gt");<br>	contents = replacement(contents, "\n", "&ltbr&gt");<br>	contents = "&ltpre&gt" + contents + "&lt/pre&gt";<br>	contents = writeTemplate(contents,filename);<br>	out &lt&lt contents; <br>	out.close();<br>}<br>#ifdef TEST_CONVERT  // only compile the following when defined<br>int main() {<br>	Convert con;<br>	<br>	char* path = _getcwd(NULL, 0);<br>	string currentPath;<br>	if (path == NULL)<br>	{<br>		std::cout &lt&lt "\nError getting path using windows system call!\n";<br>		exit(0);<br>	}<br>	currentPath = path;<br>	con.ConvertIt( "Convert.cpp", currentPath);<br>	std::cout &lt&lt "Convert Finished!";<br>	return 0;<br>}<br>#endif</pre>  </body>
</html>